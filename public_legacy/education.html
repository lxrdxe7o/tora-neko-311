<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Quantum Airways - Database Architecture</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=JetBrains+Mono:wght@400;500;600&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="css/style.css" />
    <style>
      .edu-section {
        background: rgba(10, 25, 47, 0.7);
        border: 1px solid var(--primary);
        margin-bottom: 2rem;
        padding: 1.5rem;
        border-radius: 4px;
      }
      .edu-section h3 {
        color: var(--primary);
        margin-bottom: 1rem;
        border-bottom: 1px solid var(--primary-dim);
        padding-bottom: 0.5rem;
      }
      .sql-block {
        background: #000;
        padding: 1rem;
        border-left: 3px solid var(--secondary);
        font-family: "JetBrains Mono", monospace;
        margin: 1rem 0;
        overflow-x: auto;
        color: #a8b2d1;
      }
      .comparison-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 1rem;
        margin-top: 1rem;
      }
      .bad-practice {
        border: 1px solid var(--error);
        padding: 1rem;
      }
      .good-practice {
        border: 1px solid var(--accent);
        padding: 1rem;
      }
      .diagram {
        text-align: center;
        margin: 2rem 0;
      }
    </style>
  </head>
  <body>
    <div class="scanlines"></div>

    <header class="header">
      <div class="header-content">
        <div class="logo">
          <a
            href="/"
            style="
              text-decoration: none;
              color: inherit;
              display: flex;
              align-items: center;
              gap: 0.5rem;
            "
          >
            <span class="logo-icon">&#9830;</span>
            <span class="logo-text">QUANTUM DATABASE</span>
          </a>
        </div>
        <nav class="nav-links">
          <a
            href="/"
            class="cyber-button secondary"
            style="padding: 0.5rem 1rem; font-size: 0.8rem"
            >BOOKING SYSTEM</a
          >
        </nav>
      </div>
    </header>

    <main class="main-content">
      <section class="panel">
        <div class="panel-header">
          <span class="panel-icon">&#128218;</span>
          <h2>RELATIONAL ALGEBRA & NORMALIZATION</h2>
        </div>
        <div class="panel-content">
          <div class="edu-section">
            <h3>1. RELATIONAL ALGEBRA FUNDAMENTALS</h3>
            <p>
              SQL is built on the mathematical foundation of Relational Algebra.
              Here is how our "Get Seats" query maps to these concepts:
            </p>

            <div class="sql-block">
              <strong
                >Operation: JOIN (⨝) + SELECTION (σ) + PROJECTION (π)</strong
              >
              <br /><br />
              π <sub>id, row, col, class</sub> ( σ <sub>flight_id=1</sub> (
              Seats ⨝ <sub>flight_id</sub> Flights ⨝ <sub>ac_type</sub> Layouts
              ) )
            </div>
            <p>
              We use the <strong>Cartesian Product</strong> filtered by a
              predicate (the join condition) to combine the
              <code>Seats</code> table with the
              <code>Aircraft Layouts</code> definition.
            </p>
          </div>

          <div class="edu-section">
            <h3>2. THE EVILS OF REDUNDANCY (2NF VIOLATION)</h3>
            <p>
              Initially, our <code>seats</code> table stored the
              <code>class</code> (Economy, Business) for
              <em>every single seat</em>.
            </p>

            <div class="comparison-grid">
              <div class="bad-practice">
                <h4 style="color: var(--error)">BEFORE (Redundant)</h4>
                <small>Table: seats</small>
                <pre style="font-size: 0.75rem; margin-top: 0.5rem">
| id | row | col | class      |
|----|-----|-----|------------|
| 1  | 1   | A   | First      |
| 2  | 1   | B   | First      |
| 3  | 2   | A   | First      |
| .. | ... | ... | ...        |
| 99 | 10  | F   | Economy    |</pre
                >
                <p style="font-size: 0.8rem; margin-top: 0.5rem">
                  <strong>Problem:</strong> "Class" is repeated thousands of
                  times. If we change row 1 to Business, we must update all seat
                  rows (Update Anomaly).
                </p>
              </div>
              <div class="good-practice">
                <h4 style="color: var(--accent)">AFTER (Normalized - 3NF)</h4>
                <small>Table: aircraft_layouts</small>
                <pre style="font-size: 0.75rem; margin-top: 0.5rem">
| type  | start | end | class    |
|-------|-------|-----|----------|
| Q-100 | 1     | 2   | First    |
| Q-100 | 3     | 4   | Business |
| Q-100 | 5     | 20  | Economy  |</pre
                >
                <p style="font-size: 0.8rem; margin-top: 0.5rem">
                  <strong>Solution:</strong> We extract the rule. The seat class
                  is functionally dependent on the Row Number and Aircraft Type,
                  not the Seat ID itself.
                </p>
              </div>
            </div>
          </div>

          <div class="edu-section">
            <h3>3. PHYSICAL IMPLEMENTATION</h3>
            <p>
              To implement this "Least Redundancy" design efficiently, we use a
              Range-based JOIN in MySQL/MariaDB:
            </p>
            <div class="sql-block">
              SELECT s.row, s.col, al.class FROM seats s JOIN flights f ON
              s.flight_id = f.id JOIN aircraft_layouts al ON f.aircraft_type =
              al.aircraft_type WHERE s.row_num BETWEEN al.row_start AND
              al.row_end;
            </div>
            <p>
              This allows us to store millions of seats without storing a single
              "Class" string in the seats table, saving gigabytes of storage in
              a production airline system.
            </p>
          </div>
        </div>
      </section>
    </main>

    <footer class="footer">
      <div class="footer-content">
        <p>Advanced Database Systems &bull; Relational Design Demo</p>
      </div>
    </footer>
  </body>
</html>
